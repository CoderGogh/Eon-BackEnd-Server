# Codyssey EV Charger Backend

## ì°¸ì¡° ê´€ê³„ (Configuration & ì£¼ìš” ëª¨ë“ˆ)

ì•„ë˜ëŠ” í”„ë¡œì íŠ¸ ë‚´ ì£¼ìš” íŒŒì¼ë“¤ì´ ì–´ë–»ê²Œ ì„œë¡œë¥¼ ì°¸ì¡°í•˜ëŠ”ì§€ ê°„ë‹¨íˆ ì •ë¦¬í•œ ë‹¤ì´ì–´ê·¸ë¨ì…ë‹ˆë‹¤.

```
				  .env (optional, í”„ë¡œì íŠ¸ ë£¨íŠ¸)
					 |
					 v
			      +-----------------------+
			      | app/core/config.py    |  <- ë©”ì¸ ì„¤ì •(ê¶Œì¥)
			      |  Settings -> settings |
			      +-----------------------+
				       ^       
				       |       
    +----------------+   +-------------+-------+-------------------+
    | app/main.py    |   | alembic/env.py                              |
    | app/api/...    |   | app/auth.py                                 |
    +----------------+   +---------------------------------------------+

    (ë ˆê±°ì‹œ/ìŠ¤í¬ë¦½íŠ¸)
    +----------------+
    | app/config.py  |  <- ë³´ì¡°/ë ˆê±°ì‹œ ì„¤ì • (init_db.pyì—ì„œ ì‚¬ìš©ë˜ë˜ íŒŒì¼)
    +----------------+
	    |
	    v
    app/db/init_db.py  (í˜„ì¬ëŠ” app.core.configë¡œ í†µì¼ë¨)

ê¸°ë³¸ ì›ì¹™: ëŸ°íƒ€ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ Alembic ë§ˆì´ê·¸ë ˆì´ì…˜ì€ `app/core/config.py`ì˜ `settings`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¼ë¶€ ê°œë³„ ìŠ¤í¬ë¦½ì´ `app/config.py`ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì¼ê´€ì„± ìˆê²Œ í†µì¼í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

# ğŸ”‹ Codyssey EV Charger Backend

FastAPI, PostgreSQL(PostGIS), Redis ê¸°ë°˜ì˜ ì „ê¸°ì°¨ ì¶©ì „ ì¸í”„ë¼ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

---

## 1. ğŸš€ ì†Œê°œ (Introduction)

ì´ í”„ë¡œì íŠ¸ëŠ” ì „ê¸°ì°¨ ì¶©ì „ì†Œ ë°ì´í„° ë° ë³´ì¡°ê¸ˆ ì •ë³´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì œê³µí•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. **PostGIS**ë¥¼ í†µí•œ ì§€ë¦¬ ì •ë³´ ì²˜ë¦¬ì™€ **Redis**ë¥¼ í™œìš©í•œ ê³ ì„±ëŠ¥ ìºì‹±ì„ ì§€ì›í•˜ë©°, **Render** í™˜ê²½ì— ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### ğŸ›  Tech Stack
- **Framework:** FastAPI (Python 3.10+)
- **Database:** PostgreSQL + PostGIS (ê³µê°„ ë°ì´í„° ì²˜ë¦¬)
- **Caching:** Redis (ì„±ëŠ¥ ìµœì í™” ë° ì„¸ì…˜ ê´€ë¦¬)
- **Migration:** Alembic (DB ë²„ì „ ê´€ë¦¬)
- **Dependency:** Poetry
- **Deployment:** Render.com

---

## 2. âœ¨ ì£¼ìš” ê¸°ëŠ¥ (Key Features)

### ğŸ“‚ ë°ì´í„° API
- **ë³´ì¡°ê¸ˆ ì¡°íšŒ:** ì œì¡°ì‚¬ ë° ëª¨ë¸ ê·¸ë£¹ë³„ ë³´ì¡°ê¸ˆ ì •ë³´ ì œê³µ (`/subsidy`)
- **DB í…ŒìŠ¤íŠ¸:** ì œì¡°ì‚¬/ëª¨ë¸ ê·¸ë£¹ë³„ ë°ì´í„° ì¿¼ë¦¬ í…ŒìŠ¤íŠ¸ (`/db-test`)
- **ìƒíƒœ ì ê²€:** ì‹œìŠ¤í…œ ê°€ë™ ìƒíƒœ í™•ì¸ (`/health`, `/`)

### ğŸ” ë³´ì•ˆ ë° ì¸ì¦
- **API Key ì¸ì¦:** í”„ë¡ íŠ¸ì—”ë“œ ì „ìš© `X-API-KEY` í—¤ë” ê²€ì¦
- **CORS ì„¤ì •:** í—ˆìš©ëœ Origin(`ALLOWED_ORIGINS`)ë§Œ ì ‘ê·¼ í—ˆìš©
- **JWT ë³´ì•ˆ:** `SECRET_KEY` ê¸°ë°˜ì˜ ì•ˆì „í•œ ì¸ì¦ ì²´ê³„
- **ì½ê¸° ì „ìš© ë³´í˜¸:** DB ì‚¬ìš©ì ê¶Œí•œ ë° ì½”ë“œ ë ˆë²¨ì˜ `Read-Only` ë°©ì–´ ë¡œì§

### ğŸ“ˆ ìš´ì˜ ë° ëª¨ë‹ˆí„°ë§
- **Cold Start ë°©ì§€:** UptimeRobot ë“±ì˜ `HEAD` ìš”ì²­ ëŒ€ì‘ í•¸ë“¤ëŸ¬ í¬í•¨
- **Admin Mode:** í™˜ê²½ ë³€ìˆ˜ì— ë”°ë¥¸ ì„ íƒì  API ë¬¸ì„œ(`Swagger/ReDoc`) ë…¸ì¶œ ì œì–´

---

## 3. âš™ï¸ ê°œë°œ ì„¤ì • (Configuration & Setup)

### ğŸ“Š ëª¨ë“ˆ ì°¸ì¡° êµ¬ì¡°
ì‹œìŠ¤í…œì˜ ì£¼ìš” ì„¤ì • ë° ëª¨ë“ˆ ê°„ì˜ ì°¸ì¡° ê´€ê³„ë„ì…ë‹ˆë‹¤. ëª¨ë“  ì„¤ì •ì€ `app/core/config.py`ë¡œ ì§‘ì¤‘í•˜ì—¬ ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.

```text
                 .env (optional, í”„ë¡œì íŠ¸ ë£¨íŠ¸)
                         |
                         v
              +-----------------------+
              | app/core/config.py    |  <- ë©”ì¸ ì„¤ì •(Primary)
              |  Settings -> settings |
              +-----------------------+
                       ^       
                       |       
    +----------------+   +-------------+-------+-------------------+
    | app/main.py    |   | alembic/env.py                          |
    | app/api/...    |   | app/auth.py                             |
    +----------------+   +-----------------------------------------+

    (Legacy/Scripts)
    +----------------+
    | app/config.py  |  <- ë³´ì¡° ì„¤ì • (ì¼ë¶€ ìŠ¤í¬ë¦½íŠ¸ ì „ìš©)
    +----------------+
            |
            v
    app/db/init_db.py
